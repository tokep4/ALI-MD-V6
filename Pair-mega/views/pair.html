<!DOCTYPE html><html lang="bn">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pair Code Generator | Kaisen-MD</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root{
            --pink:#ffc2e1;
            --pink-strong:#ff7aa2;
            --blue:#c2e9fb;
            --blue-strong:#6aa9ff;
            --yellow:#fff6a5;
            --yellow-strong:#ffd166;
            --red:#ffb3ba;
            --bg1:#ff9a9e;  /* pink */
            --bg2:#fecfef;  /* soft pink */
            --bg3:#a1c4fd;  /* light blue */
            --bg4:#c2ffd8;  /* mint */
            --bg5:#f6d365;  /* warm yellow */
            --bg6:#fda085;  /* peach */
            --glass: rgba(255,255,255,0.45);
            --glass-border: rgba(255,255,255,0.35);
            --text:#1a1a1a;
            --text-soft:#333;
        }* { margin: 0; padding: 0; box-sizing: border-box; }

    body {
        font-family: 'Poppins', sans-serif;
        overflow-x: hidden;
        min-height: 100vh;
        color: var(--text);
        /* Pastel rainbow animated gradient */
        background: linear-gradient(120deg, var(--bg1), var(--bg2), var(--bg3), var(--bg4), var(--bg5), var(--bg6));
        background-size: 600% 600%;
        animation: gradientShift 18s ease-in-out infinite;
        position: relative;
    }

    /* Soft floating color blobs for extra depth */
    body::before, body::after {
        content: "";
        position: fixed;
        inset: -10% -10% auto auto;
        width: 60vmax; height: 60vmax;
        background: radial-gradient(circle at 30% 30%, rgba(255,182,193,0.55), transparent 55%),
                    radial-gradient(circle at 70% 60%, rgba(173,216,230,0.45), transparent 55%),
                    radial-gradient(circle at 50% 80%, rgba(255,255,204,0.45), transparent 60%);
        filter: blur(30px);
        z-index: 0;
        animation: floaty 24s ease-in-out infinite;
        pointer-events: none;
    }
    body::after{
        inset: auto auto -20% -10%;
        width: 70vmax; height: 70vmax;
        background: radial-gradient(circle at 60% 40%, rgba(255,200,170,0.45), transparent 55%),
                    radial-gradient(circle at 30% 70%, rgba(255,105,97,0.35), transparent 55%),
                    radial-gradient(circle at 80% 80%, rgba(186,225,255,0.35), transparent 60%);
        animation-duration: 28s;
    }

    @keyframes gradientShift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }
    @keyframes floaty {
        0%,100% { transform: translate3d(0,0,0) scale(1); }
        50% { transform: translate3d(-2%, -2%, 0) scale(1.05); }
    }

    .overlay {
        position: fixed; inset: 0;
        background: linear-gradient(180deg, rgba(255,255,255,0.25), rgba(255,255,255,0.15));
        backdrop-filter: blur(2px);
        z-index: 0;
    }

    .container {
        position: relative; z-index: 1;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        min-height: 100vh; padding: 20px;
    }

    .box {
        background: rgba(255,255,255,0.55);
        border: 1px solid var(--glass-border);
        border-radius: 22px;
        padding: 40px; max-width: 520px; width: 100%; text-align: center;
        backdrop-filter: blur(10px) saturate(140%);
        box-shadow: 0 20px 50px rgba(0,0,0,0.12);
        animation: fadeIn 0.9s ease;
    }

    .logo i {
        font-size: 3.6rem;
        background: conic-gradient(from 0deg, #ff7aa2, #ffcd70, #7ad9ff, #b58cff, #ff7aa2);
        -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
        animation: pulse 2.6s infinite;
    }
    .logo h3 {
        color: var(--text);
        font-size: 2rem; font-weight: 800; margin: 14px 0 8px 0;
        letter-spacing: 0.5px;
        background: linear-gradient(90deg, #ff7aa2, #ffcd70, #7ad9ff, #b58cff);
        -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
    }
    .logo h6 { color: var(--text-soft); font-weight: 500; margin-bottom: 28px; line-height: 1.5; }

    .input-container { margin-bottom: 22px; position: relative; }

    .input-group { display: flex; gap: 10px; background: rgba(255,255,255,0.8); padding: 6px; border-radius: 14px; border: 2px solid rgba(0,0,0,0.06); transition: all 0.3s; }
    .input-group:focus-within { border-color: rgba(0,0,0,0.18); box-shadow: 0 8px 24px rgba(0,0,0,0.08); }

    .input-group input { flex: 1; border: none; outline: none; background: transparent; color: #111; font-size: 1.05rem; padding: 14px; border-radius: 10px; }
    .input-group input::placeholder { color: #666; }

    .input-group button{
        background: linear-gradient(135deg, #7ad9ff, #b58cff, #ff7aa2);
        color: #fff; border: none; padding: 14px 22px; border-radius: 12px; cursor: pointer; font-weight: 700; font-size: 1rem; transition: transform .2s ease, box-shadow .2s ease; min-width: 130px; display: inline-flex; align-items: center; justify-content: center; gap: 8px;
        box-shadow: 0 10px 24px rgba(181,140,255,0.35);
    }
    .input-group button:hover { transform: translateY(-2px); box-shadow: 0 16px 28px rgba(122,217,255,0.35); }
    .input-group button:active { transform: translateY(0); }
    .input-group button:disabled { opacity: 0.7; cursor: not-allowed; transform: none; }

    .spinner { width: 16px; height: 16px; border: 2px solid transparent; border-top: 2px solid white; border-radius: 50%; animation: spin 1s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }

    #result, #status-message { margin: 18px 0; min-height: 25px; font-weight: 600; }
    #status-message { color: #333; }

    .code-display {
        background: linear-gradient(135deg, rgba(122,217,255,0.9), rgba(181,140,255,0.9), rgba(255,122,162,0.95));
        color: #fff; padding: 22px; border-radius: 14px; cursor: pointer; transition: transform .2s ease, box-shadow .2s ease, background .3s ease;
        position: relative; overflow: hidden; word-break: break-all; font-family: 'Courier New', monospace; font-size: 1.08rem; font-weight: 700; letter-spacing: 0.8px; box-shadow: 0 12px 28px rgba(0,0,0,0.18);
    }
    .code-display::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.35), transparent); transition: left 0.6s; }
    .code-display:hover::before { left: 100%; }
    .code-display:hover { transform: translateY(-3px); box-shadow: 0 18px 34px rgba(0,0,0,0.2); }
    .copy-hint { font-size: 0.9rem; color: #f7f7f7; margin-top: 10px; opacity: 0.9; }

    .back-button { background: linear-gradient(135deg, #9aa6ff, #a0e7e5); color: #111; border: none; padding: 12px 24px; border-radius: 10px; cursor: pointer; font-weight: 700; transition: transform .2s ease, box-shadow .2s ease; margin-top: 18px; text-decoration: none; display: inline-flex; align-items: center; gap: 8px; box-shadow: 0 8px 20px rgba(0,0,0,0.12); }
    .back-button:hover { transform: translateY(-2px); box-shadow: 0 12px 26px rgba(0,0,0,0.16); }

    .examples { background: rgba(255,255,255,0.7); border-radius: 12px; padding: 16px; margin-top: 24px; text-align: left; border: 1px solid rgba(0,0,0,0.06); }
    .examples h4 { color: #3b3b3b; margin-bottom: 10px; font-size: 0.95rem; }
    .examples ul { list-style: none; padding: 0; }
    .examples li { color: #333; font-size: 0.9rem; margin-bottom: 6px; padding-left: 16px; position: relative; }
    .examples li::before { content: 'â€¢'; color: #b058eb; position: absolute; left: 0; }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(18px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.08); } }

    @media (max-width: 520px) {
        .input-group { flex-direction: column; }
        .input-group button { width: 100%; }
        .box { padding: 30px 20px; }
        .logo h3 { font-size: 1.7rem; }
    }
</style>

</head>
<body>
    <div class="overlay"></div>
    <div class="container">
        <div class="box">
            <div class="logo">
                <i class="fas fa-mobile-alt"></i>
                <h3>Kaisen-MD</h3>
                <h6>Enter your WhatsApp number with country code to generate a pairing code</h6>
            </div><div class="input-container">
            <div class="input-group">
                <input id="number" placeholder="e.g. 917000000000" maxlength="15" type="tel" />
                <button id="submit">
                    <span class="btn-text">Generate</span>
                </button>
            </div>
        </div>

        <div id="status-message"></div>
        <div id="result"></div>

        <a href="/" class="back-button">
            <i class="fas fa-arrow-left"></i>
            Back to Home
        </a>

        <div class="examples">
            <h4>ðŸ“ž Number Format Examples:</h4>
            <ul>
                <li>India: 919876543210</li>
                <li>USA: 11234567890</li>
                <li>UK: 447123456789</li>
                <li>Pakistan: 923001234567</li>
            </ul>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.0/axios.min.js"></script>
<script>
    const numberInput = document.getElementById("number");
    const submitBtn = document.getElementById("submit");
    const statusMessage = document.getElementById("status-message");
    const result = document.getElementById("result");
    let isGenerating = false;

    function showStatus(message, type = 'info') {
        statusMessage.textContent = message;
        statusMessage.style.color = type === 'error' ? '#d90429' : type === 'success' ? '#0a8754' : '#333';
    }

    function setLoading(loading) {
        isGenerating = loading;
        if (loading) {
            submitBtn.innerHTML = '<div class="spinner"></div><span>Generating...</span>';
            submitBtn.disabled = true;
        } else {
            submitBtn.innerHTML = '<span class="btn-text">Generate</span>';
            submitBtn.disabled = false;
        }
    }

    async function copyToClipboard(text) {
        try {
            await navigator.clipboard.writeText(text);
            return true;
        } catch {
            const textArea = document.createElement('textarea');
            textArea.value = text; document.body.appendChild(textArea); textArea.select();
            const success = document.execCommand('copy'); document.body.removeChild(textArea); return success;
        }
    }

    function createCodeDisplay(code) {
        const codeDiv = document.createElement('div');
        codeDiv.className = 'code-display';
        codeDiv.innerHTML = `
            <div>${code}</div>
            <div class="copy-hint">Click to copy</div>
        `;
        codeDiv.onclick = async () => {
            const success = await copyToClipboard(code);
            const originalHTML = codeDiv.innerHTML;
            if (success) {
                codeDiv.innerHTML = `
                    <div><i class="fas fa-check"></i> Copied!</div>
                    <div class="copy-hint">Code copied to clipboard</div>
                `;
                codeDiv.style.background = 'linear-gradient(135deg, #a8e6cf, #ffd3b6)';
            } else {
                codeDiv.innerHTML = `
                    <div><i class="fas fa-times"></i> Copy failed</div>
                    <div class="copy-hint">Please copy manually</div>
                `;
                codeDiv.style.background = 'linear-gradient(135deg, #ff8b94, #ffaaa5)';
            }
            setTimeout(() => {
                codeDiv.innerHTML = originalHTML;
                codeDiv.style.background = 'linear-gradient(135deg, rgba(122,217,255,0.9), rgba(181,140,255,0.9), rgba(255,122,162,0.95))';
            }, 1800);
        };
        return codeDiv;
    }

    function validatePhoneNumber(number) {
        const cleaned = number.replace(/\D/g, '');
        return cleaned.length >= 10 && cleaned.length <= 15;
    }

    submitBtn.addEventListener("click", async () => {
        if (isGenerating) return;
        const phoneNumber = numberInput.value.replace(/\D/g, '');
        if (!validatePhoneNumber(phoneNumber)) {
            showStatus("Please enter a valid phone number (10-15 digits)", "error");
            return;
        }
        setLoading(true);
        showStatus("Connecting to WhatsApp servers...", "info");
        result.innerHTML = "";
        try {
            const response = await axios.get(`/code?number=${phoneNumber}`, { timeout: 30000 });
            if (response.data && response.data.code) {
                showStatus("âœ… Pair code generated successfully!", "success");
                result.appendChild(createCodeDisplay(response.data.code));
            } else {
                showStatus("âŒ Failed to generate pair code. Please try again.", "error");
            }
        } catch (error) {
            console.error("Pair code generation error:", error);
            if (error.code === 'ECONNABORTED') {
                showStatus("â±ï¸ Request timed out. Please try again.", "error");
            } else if (error.response?.status === 400) {
                showStatus("âŒ Invalid phone number format.", "error");
            } else if (error.response?.status === 500) {
                showStatus("âš ï¸ Server error. Please try again in a moment.", "error");
            } else {
                showStatus("ðŸ”„ Connection failed. Check your internet and try again.", "error");
            }
        } finally { setLoading(false); }
    });

    numberInput.addEventListener("keypress", (e) => { if (e.key === "Enter" && !isGenerating) submitBtn.click(); });
    numberInput.addEventListener("input", (e) => { e.target.value = e.target.value.replace(/[^0-9]/g, ''); });
    window.addEventListener('load', () => { numberInput.focus(); });
</script>

</body>
</html>